import { useState } from 'react';

interface Tag {
  text: string;
  link: string;
  size: number;
}

const generateTags = (): Tag[] => {
  const queries = [
    'банки севастополя', 'банк севастополь', 'мфц севастополь', 'аренда севастополь', 'ипотека севастополь',
    'посуточно севастополь', 'нотариус севастополь', 'банк втб севастополь', 'банк россия севастополь',
    'квартира посуточно севастополь', 'орлиное севастополь', 'снять посуточно в севастополе',
    'семейная ипотека севастополь', 'юрист севастополь', 'недвижимость в севастополе',
    'авито севастополь недвижимость', 'аренда квартиры севастополь', 'вклады в банках севастополя',
    'псб банк севастополь', 'адвокат севастополь', 'жилье посуточно севастополь', 'агентство недвижимости севастополь',
    'купить ипотеку в севастополе', 'т банк севастополь', 'мфц севастополь официальный', 'дом в ипотеку в севастополе',
    'квартира в ипотеку севастополь', 'доллар банки севастополь', 'бти севастополь', 'родниковое севастополь',
    'запись в мфц севастополь', 'аренда квартиры севастополь длительно', 'кизиловое севастополь',
    'ипотека 2026 севастополь', 'проценты в банках севастополя', 'купить недвижимость в севастополе',
    'риэлтор севастополь', 'альфа банк севастополь', 'коммерческая недвижимость севастополь',
    'снять в севастополе посуточно недорого', 'условия ипотеки в севастополе', 'тыловое севастополь',
    'этажи севастополь недвижимость', 'циан севастополь недвижимость', 'сельская ипотека севастополь',
    'военная ипотека в севастополе', 'втб ипотека севастополь', 'новострой севастополь', 'широкое севастополь',
    'передовое севастополь', 'байдарская долина севастополь', 'купить дом севастополь ипотека',
    'семейная ипотека севастополь 2026', 'скельская пещера севастополь', 'новобобровка севастополь',
    'взять ипотеку в севастополе', 'ипотека в севастополе 2025', 'рк недвижимость севастополь',
    'купить квартиру в ипотеку в севастополе', 'вторичная ипотека севастополь', 'ипотека без первоначального взноса севастополь',
    'ипотека от застройщика севастополь', 'ипотека севастополь сбербанка', 'военная ипотека севастополь',
    'псб ипотека севастополь', 'строительство домов в севастополе в ипотеку', 'ипотека на вторичное жилье севастополь',
    'купить дом в севастополе по семейной ипотеке', 'ипотека на строительство севастополь', 'процент ипотеки в севастополе',
    'семейная ипотека севастополь условия', 'военная ипотека в севастополе условия', 'льготная ипотека в севастополе',
    'ипотека в банках севастополя', 'ипотека крым севастополь', 'оформить ипотеку в севастополе',
    'ипотека молодым севастополь', 'ставка ипотеки в севастополе', 'рассчитать ипотеку севастополь',
    'купить квартиру в севастополе по семейной ипотеке', 'семейная ипотека на вторичное жилье севастополь',
    'купить квартиру в севастополе в ипотеку новостройка', 'дом под семейную ипотеку севастополь',
    'квартиру под семейную ипотеку севастополь', 'семейная ипотека процент севастополь', 'купить жилье в севастополе в ипотеку',
    'ипотека для участников сво севастополь', 'семейная военная ипотека севастополь', 'ипотека под 2 сво севастополь',
    'льготная ипотека севастополь 2', 'ипотека в севастополе под 2', 'региональная ипотека севастополь',
    'ипотека севастополь 2025 калькулятор', 'калькулятор ипотеки в севастополе', 'семейная ипотека севастополь лимит',
    'семейная ипотека севастополь сколько дают', 'ипотека 5000000 севастополь', 'помощь в получении ипотеки севастополь'
  ];

  return queries.map((q, i) => ({
    text: q,
    link: q.includes('недвижимость') || q.includes('квартир') || q.includes('дом') || q.includes('аренда') ? '/#catalog' : '/register',
    size: Math.max(0.7, 1.5 - (i * 0.01))
  }));
};

const tags: Tag[] = generateTags();

export default function TagCloud() {
  const [hoveredTag, setHoveredTag] = useState<string | null>(null);

  const handleTagClick = (link: string) => {
    if (link.startsWith('/#')) {
      const hash = link.substring(2);
      const element = document.querySelector(`[value="${hash}"]`);
      if (element) {
        (element as HTMLElement).click();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    } else {
      window.location.href = link;
    }
  };

  return (
    <div className="bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl sm:rounded-2xl p-6 sm:p-8 shadow-lg">
      <div className="flex flex-wrap justify-center gap-3 sm:gap-4">
        {tags.map((tag, index) => (
          <button
            key={index}
            onClick={() => handleTagClick(tag.link)}
            onMouseEnter={() => setHoveredTag(tag.text)}
            onMouseLeave={() => setHoveredTag(null)}
            className="px-4 py-2 rounded-full transition-all duration-300 transform hover:scale-110"
            style={{
              fontSize: `${tag.size * 0.5}rem`,
              backgroundColor: hoveredTag === tag.text 
                ? 'rgb(59 130 246)' 
                : 'white',
              color: hoveredTag === tag.text 
                ? 'white' 
                : 'rgb(59 130 246)',
              boxShadow: hoveredTag === tag.text 
                ? '0 4px 12px rgba(59, 130, 246, 0.3)' 
                : '0 2px 8px rgba(0, 0, 0, 0.1)',
              fontWeight: tag.size > 2.5 ? 'bold' : 'normal',
            }}
          >
            {tag.text}
          </button>
        ))}
      </div>

      <p className="text-center text-sm text-gray-500 mt-6">
        Нажмите на тег для быстрого перехода к нужному разделу
      </p>
    </div>
  );
}